{"ast":null,"code":"// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nimport * as tslib_1 from \"tslib\";\nimport { AadAuthority } from \"./AadAuthority\";\nimport { AuthorityType } from \"./Authority\";\nimport { ClientConfigurationErrorMessage } from \"./error/ClientConfigurationError\";\nimport { UrlUtils } from \"./utils/UrlUtils\";\n/**\r\n * @hidden\r\n */\n\nvar B2cAuthority =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(B2cAuthority, _super);\n\n  function B2cAuthority(authority, validateAuthority) {\n    var _this = _super.call(this, authority, validateAuthority) || this;\n\n    var urlComponents = UrlUtils.GetUrlComponents(authority);\n    var pathSegments = urlComponents.PathSegments;\n\n    if (pathSegments.length < 3) {\n      throw ClientConfigurationErrorMessage.b2cAuthorityUriInvalidPath;\n    }\n\n    _this.CanonicalAuthority = \"https://\" + urlComponents.HostNameAndPort + \"/\" + pathSegments[0] + \"/\" + pathSegments[1] + \"/\" + pathSegments[2] + \"/\";\n    return _this;\n  }\n\n  Object.defineProperty(B2cAuthority.prototype, \"AuthorityType\", {\n    get: function () {\n      return AuthorityType.B2C;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Returns a promise with the TenantDiscoveryEndpoint\r\n   */\n\n  B2cAuthority.prototype.GetOpenIdConfigurationEndpointAsync = function () {\n    var _this = this;\n\n    var resultPromise = new Promise(function (resolve, reject) {\n      return resolve(_this.DefaultOpenIdConfigurationEndpoint);\n    });\n\n    if (!this.IsValidationEnabled) {\n      return resultPromise;\n    }\n\n    if (this.IsInTrustedHostList(this.CanonicalAuthorityUrlComponents.HostNameAndPort)) {\n      return resultPromise;\n    }\n\n    return new Promise(function (resolve, reject) {\n      return reject(ClientConfigurationErrorMessage.unsupportedAuthorityValidation);\n    });\n  };\n\n  B2cAuthority.B2C_PREFIX = \"tfp\";\n  return B2cAuthority;\n}(AadAuthority);\n\nexport { B2cAuthority };","map":null,"metadata":{},"sourceType":"module"}